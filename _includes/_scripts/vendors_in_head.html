{% comment %} Reset `window.Promise` when it was not a function. {% endcomment %}
{% comment %} IE refers the element whose id is `Promise` as `window.Promise`, this causes Velocity throwing an exception {% endcomment %}
<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>

{% assign js_vendors = '' %}
{% assign js_vendors = js_vendors | append: ', ' | append: 'jquery: jquery/index.js?v=3.2.1' %}
{% assign js_vendors = js_vendors | append: ', ' | append: 'jquery_migrate: jquery_migrate/index.js?v=3.0.0' %}

{% assign js_vendors = js_vendors | split: ", " | uniq %}
{% for js_vendor in js_vendors %}
  {% assign name_internal = js_vendor | strip | split: ": " %}
  {% if name_internal.size != 2 %} {% continue %} {% endif %}
  {% assign name = name_internal[0] | strip  %}
  {% assign internal = name_internal[1] | strip  %}
  {% assign internal_script = site.vendors._internal | append: '/' | append: internal | relative_url %}
  <script type="text/javascript" src="{{ site.vendors[name] | default: internal_script }}"></script>
{% endfor %}
